<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>TruthByte</title>
</head>
<body>
  <script>
    fetch('truthbyte.wasm').then(response =>
      response.arrayBuffer()
    ).then(bytes =>
      WebAssembly.instantiate(bytes, {
        env: {
          js_get_token: () => 0, // stub
          js_get_token_len: () => 0,
          js_get_session_id: () => 0,
          js_get_session_id_len: () => 0,
          js_set_invited_shown: (val) => console.log("invited:", !!val),
          js_get_invited_shown: () => 1,
        }
      })
    ).then(results => {
      const instance = results.instance;
      console.log("WASM loaded", instance);
    });
  </script>
</body>
</html>
